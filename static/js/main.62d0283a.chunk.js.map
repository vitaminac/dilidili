{"version":3,"sources":["config.ts","components/VideojsHotKeys.js","shapes.ts","reportWebVitals.js","actions.ts","slices.ts","store.ts","components/layout/Header.tsx","components/layout/Footer.tsx","components/layout/Layout.tsx","components/Video.js","containers/ViewPage.js","components/Pager.js","components/SortRank.js","components/SortHot.js","containers/SortPage.js","components/SearchContent.js","containers/SearchPage.js","components/BangumiInfo.js","containers/BangumiInfoPage.js","components/BangumiIndex.js","components/BangumiList.js","containers/BangumiIndexPage.js","components/AllRank.js","components/VideoListItem.tsx","components/VideoList.tsx","components/BannersSlider.tsx","containers/IndexPage.tsx","routes.tsx","index.tsx","danmaku/CommentObject.js","danmaku/StaticComment.js","danmaku/ScrollComment.js","danmaku/CommentManager.js","danmaku/VideojsPlugin.js","danmaku/BilibiliParser.js","components/Loading.js","components/layout/layout.module.css","components/layout/Header.module.css","components/layout/Footer.module.css","components/Player.js"],"names":["FRONTEND_BASE_PATH","ROUTES","VIDEO","BANGUMI","SEARCH","API_BASE_URL","BACKEND_API","BANNER","INDEX_RANK","TOP_RANK","VIDEO_INFO","VIDEO_URL","SORT_VIDEOS","BANGUMI_INFO","BANGUMI_INDEX","BANGUMI_LIST","SEARCH_BY_TYPE","GET_COMMENT","index_sorts","sort_tags","1","24","25","47","27","13","33","32","152","153","3","31","30","29","28","54","130","129","20","154","156","17","65","136","19","121","36","37","124","122","39","95","98","163","138","75","76","71","137","131","119","22","126","26","127","videojs","plugin","options","player","this","pEl","el","doc","document","def_options","volumeStep","seekStep","enableMute","enableVolumeScroll","enableFullscreen","enableNumbers","enableJogStyle","alwaysCaptureHotkeys","enableModifiersForNumbers","playPauseKey","e","which","rewindKey","forwardKey","volumeUpKey","volumeDownKey","muteKey","fullscreenKey","customKeys","mergeOptions","util","enableFull","hasAttribute","setAttribute","style","outline","autoplay","one","focus","on","cancelFocusingPlayer","clearTimeout","focusingPlayerTimeout","setTimeout","off","activeElement","parentElement","querySelector","ifblocker","display","bottom","mouseScroll","event","controls","activeEl","relatedTarget","toElement","window","delta","Math","max","min","wheelDelta","detail","preventDefault","volume","checkKeys","curTime","ewhich","ePreventDefault","stopPropagation","paused","play","pause","currentTime","muted","isFullscreen","exitFullscreen","requestFullscreen","metaKey","ctrlKey","altKey","sub","number","duration","customKey","customHotkey","key","handler","TaskState","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","fetchHotVideos","createAsyncThunk","a","Promise","resolve","videoId","title","cover","uploader","playCount","fetchBanners","url","img","changeTaskState","taskState","tasks","taskId","map","task","id","state","tasksSlice","createSlice","name","initialState","reducers","archiveTask","action","TASK_ARCHIVED","payload","pinTask","TASK_PINNED","videosSlice","extraReducers","builder","addCase","fulfilled","forEach","videoDetail","bannersSlice","concat","preloadedState","videos","banners","store","configureStore","reducer","combineReducers","devTools","process","Header","history","useHistory","headerRef","useRef","useState","keyword","setKeyword","handleScroll","useCallback","offsetTop","pageYOffset","current","classList","add","sticky","remove","useEffect","callback","addEventListener","removeEventListener","className","bg","ref","href","onSubmit","push","placeholder","value","onChange","target","type","Footer","aboutLinks","Date","getFullYear","Layout","children","layout","header","content","footer","_","require","Player","Tags","tags","split","props","str","renderTags","i","React","Component","defaultProps","VideoInfo","data","typename","created_at","video_review","coins","src","face","author","favorites","list","parts","pic","Loading","tag","description","mid","pages","review","tid","Video","videoInfo","aid","_this","reqwest","Config","method","crossOrigin","error","err","console","log","success","cb","setState","_loadData","titleCallback","Pager","page","allPage","pageCallBack","start","nowPage","showPageCount","renderList","index","onClick","_pageChange","bind","VideoItem","linkUrl","param","danmaku","reply","favourite","VideoBlock","videoList","SortRank","_page","_order","loading","sort","$","animate","scrollTop","labelName","nextProps","_changeSort","_changePage","SortHot","setTime","pubdate","desc","UserItem","fans","sign","BangumiItem","cat_desc","total_count","arcurl","click","tp_id","tp_type","update","refs","search_content","searchCallBack","prevProps","prevState","_handleClick","SearchContent","_searchType","_keyword","page_size","order","all_page","renderArr","length","_changeType","_changeOrder","season_id","is_finish","BangumiInfo","_seasonId","bagnumiInfo","bangumiInfo","seasonId","seasons","actors","actor","episodes","av_id","index_title","evaluate","play_count","danmaku_count","BangumiBanner","unslider","animation","arrows","keys","_loadBanner","link","alt","comment","create","typeid","BangumiIndex","indexData","recommend_videos","recommends","attention","BangumiList","maxHeight","bangumiList","_showMore","BangumiIndexPage","rel","getInitialState","resp","renderVideos","AllRank","VideoListItem","to","VideoList","loadVideosList","Fragment","slice","video","BannerBlock","bannerList","banner","IndexBanner","loadBanners","IndexHot","connect","createSelector","Object","values","b","dispatch","PureVideoList","PureIndexBanner","IndexPage","path","component","params","match","ReactDOM","render","StrictMode","basename","Routes","getElementById","CommentObject","manager","init","align","mode","stime","text","_size","_color","control","_border","lifeTime","global","scale","hasOwnProperty","_x","_y","x","undefined","dom","offsetLeft","stage","offsetWidth","right","left","y","offsetHeight","top","c","color","toString","Array","join","indexOf","w","_width","width","h","_height","height","s","fontSize","border","createElement","appendChild","createTextNode","textContent","innerText","Color","Size","nowTime","StaticComment","channel","offset","preY","nowLine","cmObj","offsetY","Height","margin","insertY","_findOffsetY","indexOffset","offsetX","Width","ScrollComment","follow","scroll","moving","timeOffset","moveAnimation","timeLeft","trans","transform","dx","transition","CommentManager","commentLine","position","opacity","limit","stop","pushCmt","unshift","low","high","insertIndex","floor","splice","removeCmt","setBounds","cmt","nowLinePush","locateTime","locate","time","end","send","checkTime","timeLine","rmObj","nowLineRemove","removeChild","danmu","ele","danmuDiv","insertBefore","getElementsByClassName","danmuShowControl","danmuShowControlContent","innerHTML","cmManager","clear","lastPosition","hasStalled","stopTimer","startTimer","seek","load","xmlDoc","elements","getElementsByTagName","danmakuList","getAttribute","opt","childNodes","nodeValue","obj","round","parseFloat","parseInt","size","date","pool","dbid","hash","replace","BilibiliParser","module","exports","_oldPlayer","_player","commentUrl","videoUrl","dispose","initDanmaku","hotkeys","_loadVideoJs","urlList","preload","poster","_cid","_quality","nowPlay","partStr","cid","_loadVideoData","_selectParts","partList","active","part","durl"],"mappings":"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","file":"static/js/main.62d0283a.chunk.js","sourcesContent":["export const FRONTEND_BASE_PATH = \"/dilidili\";\nexport const ROUTES = {\n  VIDEO: \"/view\",\n  BANGUMI: \"/bangumi\",\n  SEARCH: \"/search\",\n};\n\nexport const API_BASE_URL = \"/api\";\nexport const BACKEND_API = {\n  BANNER: \"/banner\",\n  INDEX_RANK: \"/top/\",\n  TOP_RANK: \"/toprank\",\n  VIDEO_INFO: \"/view/\",\n  VIDEO_URL: \"/video/\",\n  SORT_VIDEOS: \"/sort/\",\n  BANGUMI_INFO: \"/bangumiinfo/\",\n  BANGUMI_INDEX: \"/bangumiindex\",\n  BANGUMI_LIST: \"/bangumi\",\n  SEARCH: \"/search\",\n  SEARCH_BY_TYPE: \"/searchbytype\",\n  GET_COMMENT: \"http://comment.bilibili.cn/\",\n};\n\nexport const index_sorts = [24, 33, 31, 20, 17, 36, 119];\n\nexport const sort_tags = {\n  1: \"动画\",\n  24: \"MAD·AMV\",\n  25: \"MMD·3D\",\n  47: \"短片·手书·配音\",\n  27: \"综合\",\n\n  13: \"番剧\",\n  33: \"连载动画\",\n  32: \"完结动画\",\n  152: \"官方延伸\",\n  153: \"国产动画\",\n\n  3: \"音乐\",\n  31: \"翻唱\",\n  30: \"VOCALOID·UTAU\",\n  29: \"三次元音乐\",\n  28: \"同人音乐\",\n  54: \"OP/ED/OST\",\n  130: \"音乐选集\",\n\n  129: \"舞蹈\",\n  20: \"宅舞\",\n  154: \"三次元舞蹈\",\n  156: \"舞蹈教程\",\n\n  17: \"单机联机\",\n  65: \"网游·电竞\",\n  136: \"音游\",\n  19: \"Mugen\",\n  121: \"GMV\",\n\n  36: \"科技\",\n  37: \"纪录片\",\n  124: \"趣味科普人文\",\n  122: \"野生技术协会\",\n  39: \"演讲·公开课\",\n  95: \"数码\",\n  98: \"机械\",\n\n  163: \"搞笑\",\n  138: \"生活\",\n  75: \"动物圈\",\n  76: \"美食圈\",\n  71: \"综艺\",\n  137: \"娱乐圈\",\n  131: \"Korea相关\",\n\n  119: \"鬼畜\",\n  22: \"鬼畜调教\",\n  126: \"人力VOCALOID\",\n  26: \"音MAD\",\n  127: \"教程演示\",\n};\n","import videojs from \"video.js\";\n\nvideojs.plugin(\"hotkeys\", function (options) {\n  var player = this;\n  var pEl = player.el();\n  var doc = document;\n  var def_options = {\n    volumeStep: 0.1,\n    seekStep: 5,\n    enableMute: true,\n    enableVolumeScroll: true,\n    enableFullscreen: true,\n    enableNumbers: true,\n    enableJogStyle: false,\n    alwaysCaptureHotkeys: false,\n    enableModifiersForNumbers: true,\n    playPauseKey: playPauseKey,\n    rewindKey: rewindKey,\n    forwardKey: forwardKey,\n    volumeUpKey: volumeUpKey,\n    volumeDownKey: volumeDownKey,\n    muteKey: muteKey,\n    fullscreenKey: fullscreenKey,\n    customKeys: {},\n  };\n\n  var cPlay = 1,\n    cRewind = 2,\n    cForward = 3,\n    cVolumeUp = 4,\n    cVolumeDown = 5,\n    cMute = 6,\n    cFullscreen = 7;\n\n  // Use built-in merge function from Video.js v5.0+ or v4.4.0+\n  var mergeOptions = videojs.mergeOptions || videojs.util.mergeOptions;\n  options = mergeOptions(def_options, options || {});\n\n  var volumeStep = options.volumeStep,\n    seekStep = options.seekStep,\n    enableMute = options.enableMute,\n    enableVolumeScroll = options.enableVolumeScroll,\n    enableFull = options.enableFullscreen,\n    enableNumbers = options.enableNumbers,\n    enableJogStyle = options.enableJogStyle,\n    alwaysCaptureHotkeys = options.alwaysCaptureHotkeys,\n    enableModifiersForNumbers = options.enableModifiersForNumbers;\n\n  // Set default player tabindex to handle keydown and doubleclick events\n  if (!pEl.hasAttribute(\"tabIndex\")) {\n    pEl.setAttribute(\"tabIndex\", \"-1\");\n  }\n\n  // Remove player outline to fix video performance issue\n  pEl.style.outline = \"none\";\n\n  if (alwaysCaptureHotkeys || !player.autoplay()) {\n    player.one(\"play\", function () {\n      pEl.focus(); // Fixes the .vjs-big-play-button handing focus back to body instead of the player\n    });\n  }\n\n  player.on(\"userinactive\", function () {\n    // When the control bar fades, re-apply focus to the player if last focus was a control button\n    var cancelFocusingPlayer = function () {\n      clearTimeout(focusingPlayerTimeout);\n    };\n    var focusingPlayerTimeout = setTimeout(function () {\n      player.off(\"useractive\", cancelFocusingPlayer);\n      if (\n        doc.activeElement.parentElement == pEl.querySelector(\".vjs-control-bar\")\n      ) {\n        pEl.focus();\n      }\n    }, 10);\n\n    player.one(\"useractive\", cancelFocusingPlayer);\n  });\n\n  player.on(\"play\", function () {\n    // Fix allowing the YouTube plugin to have hotkey support.\n    var ifblocker = pEl.querySelector(\".iframeblocker\");\n    if (ifblocker && ifblocker.style.display === \"\") {\n      ifblocker.style.display = \"block\";\n      ifblocker.style.bottom = \"39px\";\n    }\n  });\n\n  var keyDown = function keyDown(event) {\n    var ewhich = event.which,\n      curTime;\n    var ePreventDefault = event.preventDefault;\n    // When controls are disabled, hotkeys will be disabled as well\n    if (player.controls()) {\n      // Don't catch keys if any control buttons are focused, unless alwaysCaptureHotkeys is true\n      var activeEl = doc.activeElement;\n      if (\n        alwaysCaptureHotkeys ||\n        activeEl == pEl ||\n        activeEl == pEl.querySelector(\".vjs-tech\") ||\n        activeEl == pEl.querySelector(\".vjs-control-bar\") ||\n        activeEl == pEl.querySelector(\".iframeblocker\")\n      ) {\n        switch (checkKeys(event, player)) {\n          // Spacebar toggles play/pause\n          case cPlay:\n            ePreventDefault();\n            if (alwaysCaptureHotkeys) {\n              // Prevent control activation with space\n              event.stopPropagation();\n            }\n\n            if (player.paused()) {\n              player.play();\n            } else {\n              player.pause();\n            }\n            break;\n\n          // Seeking with the left/right arrow keys\n          case cRewind: // Seek Backward\n            ePreventDefault();\n            curTime = player.currentTime() - seekStep;\n            // The flash player tech will allow you to seek into negative\n            // numbers and break the seekbar, so try to prevent that.\n            if (player.currentTime() <= seekStep) {\n              curTime = 0;\n            }\n            player.currentTime(curTime);\n            break;\n          case cForward: // Seek Forward\n            ePreventDefault();\n            player.currentTime(player.currentTime() + seekStep);\n            break;\n\n          // Volume control with the up/down arrow keys\n          case cVolumeDown:\n            ePreventDefault();\n            if (!enableJogStyle) {\n              player.volume(player.volume() - volumeStep);\n            } else {\n              curTime = player.currentTime() - 1;\n              if (player.currentTime() <= 1) {\n                curTime = 0;\n              }\n              player.currentTime(curTime);\n            }\n            break;\n          case cVolumeUp:\n            ePreventDefault();\n            if (!enableJogStyle) {\n              player.volume(player.volume() + volumeStep);\n            } else {\n              player.currentTime(player.currentTime() + 1);\n            }\n            break;\n\n          // Toggle Mute with the M key\n          case cMute:\n            if (enableMute) {\n              player.muted(!player.muted());\n            }\n            break;\n\n          // Toggle Fullscreen with the F key\n          case cFullscreen:\n            if (enableFull) {\n              if (player.isFullscreen()) {\n                player.exitFullscreen();\n              } else {\n                player.requestFullscreen();\n              }\n            }\n            break;\n\n          default:\n            // Number keys from 0-9 skip to a percentage of the video. 0 is 0% and 9 is 90%\n            if ((ewhich > 47 && ewhich < 59) || (ewhich > 95 && ewhich < 106)) {\n              // Do not handle if enableModifiersForNumbers set to false and keys are Ctrl, Cmd or Alt\n              if (\n                enableModifiersForNumbers ||\n                !(event.metaKey || event.ctrlKey || event.altKey)\n              ) {\n                if (enableNumbers) {\n                  var sub = 48;\n                  if (ewhich > 95) {\n                    sub = 96;\n                  }\n                  var number = ewhich - sub;\n                  ePreventDefault();\n                  player.currentTime(player.duration() * number * 0.1);\n                }\n              }\n            }\n\n            // Handle any custom hotkeys\n            for (var customKey in options.customKeys) {\n              var customHotkey = options.customKeys[customKey];\n              // Check for well formed custom keys\n              if (customHotkey && customHotkey.key && customHotkey.handler) {\n                // Check if the custom key's condition matches\n                if (customHotkey.key(event)) {\n                  ePreventDefault();\n                  customHotkey.handler(player, options);\n                }\n              }\n            }\n        }\n      }\n    }\n  };\n\n  var doubleClick = function doubleClick(event) {\n    // When controls are disabled, hotkeys will be disabled as well\n    if (player.controls()) {\n      // Don't catch clicks if any control buttons are focused\n      var activeEl =\n        event.relatedTarget || event.toElement || doc.activeElement;\n      if (\n        activeEl == pEl ||\n        activeEl == pEl.querySelector(\".vjs-tech\") ||\n        activeEl == pEl.querySelector(\".iframeblocker\")\n      ) {\n        if (enableFull) {\n          if (player.isFullscreen()) {\n            player.exitFullscreen();\n          } else {\n            player.requestFullscreen();\n          }\n        }\n      }\n    }\n  };\n\n  var mouseScroll = function mouseScroll(event) {\n    // When controls are disabled, hotkeys will be disabled as well\n    if (player.controls()) {\n      var activeEl =\n        event.relatedTarget || event.toElement || doc.activeElement;\n      if (\n        alwaysCaptureHotkeys ||\n        activeEl == pEl ||\n        activeEl == pEl.querySelector(\".vjs-tech\") ||\n        activeEl == pEl.querySelector(\".iframeblocker\") ||\n        activeEl == pEl.querySelector(\".vjs-control-bar\")\n      ) {\n        if (enableVolumeScroll) {\n          event = window.event || event;\n          var delta = Math.max(\n            -1,\n            Math.min(1, event.wheelDelta || -event.detail)\n          );\n          event.preventDefault();\n\n          if (delta == 1) {\n            player.volume(player.volume() + volumeStep);\n          } else if (delta == -1) {\n            player.volume(player.volume() - volumeStep);\n          }\n        }\n      }\n    }\n  };\n\n  var checkKeys = function checkKeys(e, player) {\n    // Allow some modularity in defining custom hotkeys\n\n    // Play/Pause check\n    if (options.playPauseKey(e, player)) {\n      return cPlay;\n    }\n\n    // Seek Backward check\n    if (options.rewindKey(e, player)) {\n      return cRewind;\n    }\n\n    // Seek Forward check\n    if (options.forwardKey(e, player)) {\n      return cForward;\n    }\n\n    // Volume Up check\n    if (options.volumeUpKey(e, player)) {\n      return cVolumeUp;\n    }\n\n    // Volume Down check\n    if (options.volumeDownKey(e, player)) {\n      return cVolumeDown;\n    }\n\n    // Mute check\n    if (options.muteKey(e, player)) {\n      return cMute;\n    }\n\n    // Fullscreen check\n    if (options.fullscreenKey(e, player)) {\n      return cFullscreen;\n    }\n  };\n\n  function playPauseKey(e) {\n    // Space bar or MediaPlayPause\n    return e.which === 32 || e.which === 179;\n  }\n\n  function rewindKey(e) {\n    // Left Arrow or MediaRewind\n    return e.which === 37 || e.which === 177;\n  }\n\n  function forwardKey(e) {\n    // Right Arrow or MediaForward\n    return e.which === 39 || e.which === 176;\n  }\n\n  function volumeUpKey(e) {\n    // Up Arrow\n    return e.which === 38;\n  }\n\n  function volumeDownKey(e) {\n    // Down Arrow\n    return e.which === 40;\n  }\n\n  function muteKey(e) {\n    // M key\n    return e.which === 77;\n  }\n\n  function fullscreenKey(e) {\n    // F key\n    return e.which === 70;\n  }\n\n  player.on(\"keydown\", keyDown);\n  player.on(\"dblclick\", doubleClick);\n  player.on(\"mousewheel\", mouseScroll);\n  player.on(\"DOMMouseScroll\", mouseScroll);\n\n  return this;\n});\n","export enum TaskState {\n  TASK_INBOX,\n  TASK_PINNED,\n  TASK_ARCHIVED,\n}\n\nexport interface Task {\n  /** Id of the task */\n  readonly id: string;\n  /** Title of the task */\n  readonly title: string;\n  /** Current state of the task */\n  readonly state: TaskState;\n  readonly updatedAt?: Date;\n}\n\nexport interface VideoDetail {\n  title: string;\n  cover: string;\n  uploader: string;\n  playCount: number;\n  videoId: number;\n}\n\nexport interface Banner {\n  url: string;\n  img: string;\n}\nexport interface ReduxStoreTree {\n  tasks: Task[];\n  videos: Record<number, VideoDetail>;\n  banners: Banner[];\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { Banner } from \"./shapes\";\n\nexport const fetchHotVideos = createAsyncThunk(\"fetchHotVideos\", async () => {\n  await Promise.resolve();\n  return [\n    {\n      videoId: 1,\n      title: \"史莱姆的故事\",\n      cover: \"https://i.imgur.com/nWvPmbU.jpg\",\n      uploader: \"test\",\n      playCount: 99,\n    },\n    {\n      videoId: 2,\n      title: \"蜘蛛子的故事\",\n      cover: \"https://i.imgur.com/nkeAy9x.jpg\",\n      uploader: \"test\",\n      playCount: 80,\n    },\n    {\n      videoId: 3,\n      title: \"Overload\",\n      cover: \"https://i.imgur.com/e0XzYz8.jpg\",\n      uploader: \"test\",\n      playCount: 89,\n    },\n    {\n      videoId: 4,\n      title: \"齐木楠雄\",\n      cover: \"https://i.imgur.com/YVr2Qj0.jpg\",\n      uploader: \"test\",\n      playCount: 72,\n    },\n    {\n      videoId: 5,\n      title: \"灵能爆发\",\n      cover: \"https://i.imgur.com/OlWclp1.jpg\",\n      uploader: \"test\",\n      playCount: 68,\n    },\n    {\n      videoId: 6,\n      title: \"智障女神\",\n      cover: \"https://i.imgur.com/Ll8itdv.jpg\",\n      uploader: \"test\",\n      playCount: 70,\n    },\n    {\n      videoId: 0,\n      title: \"no debe mostrar\",\n      cover: \"\",\n      uploader: \"test\",\n      playCount: 0,\n    },\n  ];\n});\n\nexport const fetchBanners = createAsyncThunk(\n  \"fetchBanners\",\n  async (): Promise<Banner[]> => {\n    await Promise.resolve();\n    return [\n      {\n        url: \"/videos/1\",\n        img: \"https://i.imgur.com/hIV4zt8.jpg\",\n      },\n      {\n        url: \"/videos/2\",\n        img: \"https://i.imgur.com/nzpoxci.png\",\n      },\n    ];\n  }\n);\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Banner, Task, TaskState, VideoDetail } from \"./shapes\";\nimport { fetchHotVideos, fetchBanners } from \"./actions\";\n\nfunction changeTaskState(taskState: TaskState) {\n  return (tasks: Task[], taskId: string): Task[] => {\n    return tasks.map((task) =>\n      task.id === taskId ? { ...task, state: taskState } : task\n    );\n  };\n}\n\nexport const tasksSlice = createSlice({\n  name: \"tasks\",\n  initialState: [] as Task[],\n  reducers: {\n    archiveTask(tasks: Task[], action: PayloadAction<string>) {\n      return changeTaskState(TaskState.TASK_ARCHIVED)(tasks, action.payload);\n    },\n    pinTask(tasks: Task[], action: PayloadAction<string>) {\n      return changeTaskState(TaskState.TASK_PINNED)(tasks, action.payload);\n    },\n  },\n});\n\nexport const videosSlice = createSlice({\n  name: \"videos\",\n  initialState: {} as Record<number, VideoDetail>,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchHotVideos.fulfilled, (state, action) => {\n      action.payload.forEach(\n        (videoDetail) => (state[videoDetail.videoId] = videoDetail)\n      );\n    });\n  },\n});\n\nexport const bannersSlice = createSlice({\n  name: \"banners\",\n  initialState: [] as Banner[],\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchBanners.fulfilled, (state, action) => {\n      return state.concat(action.payload);\n    });\n  },\n});\n","import { configureStore, combineReducers } from \"@reduxjs/toolkit\";\nimport { ReduxStoreTree, TaskState } from \"./shapes\";\nimport { tasksSlice, videosSlice, bannersSlice } from \"./slices\";\n\nconst preloadedState: ReduxStoreTree =\n  process.env.NODE_ENV === \"production\"\n    ? {\n        tasks: [],\n        videos: {},\n        banners: [],\n      }\n    : {\n        tasks: [\n          { id: \"1\", title: \"Task 1\", state: TaskState.TASK_INBOX },\n          { id: \"2\", title: \"Task 2\", state: TaskState.TASK_PINNED },\n          { id: \"3\", title: \"Task 3\", state: TaskState.TASK_ARCHIVED },\n          { id: \"4\", title: \"Task 4\", state: TaskState.TASK_INBOX },\n        ],\n        videos: {},\n        banners: [],\n      };\n\nexport const store = configureStore({\n  reducer: combineReducers({\n    tasks: tasksSlice.reducer,\n    videos: videosSlice.reducer,\n    banners: bannersSlice.reducer,\n  }),\n  preloadedState: preloadedState,\n  devTools: process.env.NODE_ENV !== \"production\",\n});\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport style from \"./Header.module.css\";\n\nexport default function Header() {\n  const history = useHistory();\n  const headerRef = useRef<HTMLHeadingElement>(null);\n  const [keyword, setKeyword] = useState(\"\");\n\n  const handleScroll = useCallback(\n    (offsetTop) => {\n      if (window.pageYOffset > offsetTop) {\n        headerRef.current?.classList.add(style.sticky);\n      } else {\n        headerRef.current?.classList.remove(style.sticky);\n      }\n    },\n    [headerRef]\n  );\n\n  useEffect(() => {\n    const offsetTop = headerRef.current?.offsetTop;\n    const callback = () => handleScroll(offsetTop);\n    window.addEventListener(\"scroll\", callback);\n\n    return () => {\n      window.removeEventListener(\"scroll\", callback);\n    };\n  }, [handleScroll]);\n\n  return (\n    <div id=\"main-header\">\n      <div className=\"main-header-nav\">\n        <div className={style.bg} />\n        <div className=\"header-container\" ref={headerRef}>\n          <ul className=\"main-header-nav-body\">\n            <li className=\"nav-li floatleft now\">\n              <a href=\"/\">首页</a>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/sort/1\">动画</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/24\">MAD·AMV</a>\n                <a href=\"/sort/25\">MMD·3D</a>\n                <a href=\"/sort/47\">短片·手书·配音</a>\n                <a href=\"/sort/27\">综合</a>\n              </div>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/bangumiindex\">番剧</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/33\">连载动画</a>\n                <a href=\"/sort/32\">完结动画</a>\n                <a href=\"/sort/152\">官方延伸</a>\n                <a href=\"/sort/153\">国产动画</a>\n              </div>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/sort/3\">音乐</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/31\">翻唱</a>\n                <a href=\"/sort/30\">VOCALOID·UTAU</a>\n                <a href=\"/sort/29\">三次元音乐</a>\n                <a href=\"/sort/28\">同人音乐</a>\n                <a href=\"/sort/54\">OP/ED/OST</a>\n                <a href=\"/sort/130\">音乐选集</a>\n              </div>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/sort/129\">舞蹈</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/20\">宅舞</a>\n                <a href=\"/sort/154\">三次元舞蹈</a>\n                <a href=\"/sort/156\">舞蹈教程</a>\n              </div>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/sort/4\">游戏</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/17\">单机联机</a>\n                <a href=\"/sort/65\">网游·电竞</a>\n                <a href=\"/sort/136\">音游</a>\n                <a href=\"/sort/19\">Mugen</a>\n                <a href=\"/sort/121\">GMV</a>\n              </div>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/sort/36\">科技</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/37\">纪录片</a>\n                <a href=\"/sort/124\">趣味科普人文</a>\n                <a href=\"/sort/122\">野生技术协会</a>\n                <a href=\"/sort/39\">演讲·公开课</a>\n                <a href=\"/sort/95\">数码</a>\n                <a href=\"/sort/98\">机械</a>\n              </div>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/sort/5\">娱乐</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/153\">搞笑</a>\n                <a href=\"/sort/138\">生活</a>\n                <a href=\"/sort/75\">动物圈</a>\n                <a href=\"/sort/76\">美食圈</a>\n                <a href=\"/sort/71\">综艺</a>\n                <a href=\"/sort/137\">娱乐圈</a>\n                <a href=\"/sort/131\">Korea相关</a>\n              </div>\n            </li>\n\n            <li className=\"nav-li floatleft\">\n              <a href=\"/sort/119\">鬼畜</a>\n              <div className=\"nav-li-list\">\n                <a href=\"/sort/22\">鬼畜调教</a>\n                <a href=\"/sort/26\">音MAD</a>\n                <a href=\"/sort/126\">人力VOCALOID</a>\n                <a href=\"/sort/127\">教程演示</a>\n              </div>\n            </li>\n\n            <div className=\"header-search floatright\">\n              <form\n                id=\"search_form\"\n                onSubmit={() => history.push(\"/search/\" + keyword)}\n              >\n                <input\n                  name=\"keyword\"\n                  id=\"search_content\"\n                  placeholder=\"这里搜索\"\n                  value={keyword}\n                  onChange={(e) => setKeyword(e.target.value)}\n                />\n                <input\n                  type=\"submit\"\n                  value=\"搜 索\"\n                  title=\"搜索\"\n                  className=\"btn-search\"\n                />\n              </form>\n            </div>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport style from \"./Footer.module.css\";\n\nexport default function Footer() {\n  return (\n    <div id=\"footer\">\n      <div className=\"area-inner\">\n        <div className=\"about-block floatleft\">\n          <div className=\"about-item left floatleft\">\n            <div className=\"about-title\">About</div>\n            <div className={style.aboutLinks}>\n              <a href=\"http://www.bilibili.com\">BiliBili弹幕视频网</a>\n              <a href=\"https://github.com/vitaminac/dilidili\">项目地址</a>\n            </div>\n          </div>\n          <div className=\"about-item floatleft\">\n            <div className=\"about-title\">Contact</div>\n            <div className={style.aboutLinks}>\n              <a href=\"https://vitaminac.github.io/\">Blog</a>\n              <a href=\"https://github.com/vitaminac\">Github</a>\n            </div>\n          </div>\n          <div className=\"about-item right floatleft\">\n            <div className=\"about-title\">Copyright</div>\n            <div className={style.aboutLinks}>\n              <span>{`© 1997-${new Date().getFullYear()}`}</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"clear\"></div>\n      </div>\n    </div>\n  );\n}\n","import React, { FunctionComponent } from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport \"./reset.css\";\nimport style from \"./layout.module.css\";\n\nconst Layout: FunctionComponent<{}> = ({ children }) => (\n  <div className={style.layout}>\n    <div className={style.header}>\n      <Header />\n    </div>\n    <div className={style.content}>{children}</div>\n    <div className={style.footer}>\n      <Footer />\n    </div>\n  </div>\n);\n\nexport default Layout;\n","import React from \"react\";\nimport reqwest from \"reqwest\";\nvar _ = require(\"lodash\");\n\nimport * as Config from \"../config\";\nvar Player = require(\"./Player\");\nimport Loading from \"./Loading\";\nclass Tags extends React.Component {\n  render() {\n    var tags = _.split(this.props.str, \",\");\n    var renderTags = [];\n    for (var i in tags) {\n      renderTags.push(\n        <li key={i} className=\"floatleft\">\n          {tags[i]}\n        </li>\n      );\n    }\n\n    return (\n      <ul className=\"tags floatleft\">\n        {renderTags}\n        <div className=\"clear\"></div>\n      </ul>\n    );\n  }\n}\n\nTags.defaultProps = {\n  str: \"\",\n};\n\nclass VideoInfo extends React.Component {\n  render() {\n    return (\n      <div>\n        <div className=\"area\">\n          <div className=\"video-info\">\n            <div className=\"area-inner\">\n              <div className=\"left floatleft\">\n                <div className=\"title\">\n                  <h1>{this.props.data.title}</h1>\n                </div>\n                <div className=\"info floatleft\">\n                  <div className=\"info-text floatleft\">\n                    分类: {this.props.data.typename}\n                  </div>\n                  <div className=\"info-text floatright\">\n                    时间: {this.props.data.created_at}\n                  </div>\n                </div>\n                <div className=\"clear\"></div>\n                <div className=\"play-info floatleft\">\n                  <div className=\"info-text floatleft\">\n                    播放: {this.props.data.play}\n                  </div>\n                  <div className=\"info-text floatleft\">\n                    弹幕: {this.props.data.video_review}\n                  </div>\n                  <div className=\"info-text floatleft\">\n                    硬币: {this.props.data.coins}\n                  </div>\n                </div>\n                <div className=\"clear\"></div>\n              </div>\n              <div className=\"right floatleft\">\n                <div className=\"up-face floatleft\">\n                  <a href=\"#\">\n                    <img src={this.props.data.face} />\n                  </a>\n                </div>\n                <div className=\"up-info floatleft\">\n                  <a href=\"#\" className=\"title\">\n                    {this.props.data.author}\n                  </a>\n                  <div className=\"brief\">收藏: {this.props.data.favorites}</div>\n                </div>\n              </div>\n              <div className=\"clear\"></div>\n            </div>\n          </div>\n        </div>\n\n        {this.props.data.list ? (\n          <Player parts={this.props.data.list} pic={this.props.data.pic} />\n        ) : (\n          <Loading />\n        )}\n\n        <div className=\"area\">\n          <div className=\"area-inner\">\n            <div className=\"video-brief\">\n              <Tags str={this.props.data.tag} />\n\n              <div className=\"clear\"></div>\n              <div className=\"desc\">{this.props.data.description}</div>\n\n              <div className=\"comments\">\n                <span className=\"label\">评论</span>\n                <p>(施工中)</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nVideoInfo.defaultProps = {\n  author: \"\",\n  coins: \"\",\n  created_at: \"\",\n  description: \"\",\n  face: \"\",\n  favorites: \"\",\n  list: {},\n  mid: \"\",\n  pages: 1,\n  pic: \"\",\n  play: \"\",\n  review: \"\",\n  tag: \"\",\n  tid: 0,\n  title: \"\",\n  typename: \"\",\n  video_review: \"\",\n};\n\nexport default class Video extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      videoInfo: {},\n    };\n  }\n\n  _loadData() {\n    if (this.props.aid !== null) {\n      var _this = this;\n      reqwest({\n        url:\n          Config.API_BASE_URL + Config.BACKEND_API.VIDEO_INFO + this.props.aid,\n        type: \"json\",\n        method: \"get\",\n        crossOrigin: true,\n        error: function (err) {\n          console.log(\"error\");\n        },\n        success: function (data) {\n          _this.props.cb(data.title);\n          _this.setState({\n            videoInfo: data,\n          });\n        },\n      });\n    }\n  }\n\n  componentDidMount() {\n    this._loadData();\n  }\n\n  render() {\n    return <VideoInfo data={this.state.videoInfo} />;\n  }\n}\n\nVideo.defaultProps = {\n  aid: null,\n  cb: function (content) {},\n};\n","import React from \"react\";\nimport Video from \"../components/Video\";\n\nfunction titleCallback(content) {\n  document.title = \"BH5 | \" + content;\n}\n\nexport default function ViewPage() {\n  return (\n    <div id=\"main-container\" className=\"concat\">\n      <Video cb={titleCallback} aid={this.props.params.aid} />\n    </div>\n  );\n}\n","import React from 'react';\nexport default class Pager extends React.Component {\n    _pageChange(page) {\n        if (page < 1) {\n            page = 1;\n        }\n        if (page > this.props.allPage) {\n            page = this.props.allPage;\n        }\n        this.props.pageCallBack(page);\n    }\n    static defaultProps = {\n        nowPage: 1,\n        allPage: 0,\n        showPageCount: 8,\n        pageCallBack: function (page) {\n        }\n    }\n    render() {\n        var start = this.props.nowPage - this.props.showPageCount / 2;\n        if (start < 1) {\n            start = 1;\n        }\n        var renderList = [];\n\n        for (var i = 0; i < this.props.showPageCount; i++) {\n            if (i >= this.props.allPage && this.props.allPage >= 0) {\n                break;\n            }\n            var index = start + i;\n            if (index === this.props.nowPage) {\n                renderList.push(<span key={\"pager-\" + index} className=\"floatleft active\">{index}</span>)\n            } else {\n                renderList.push(<span key={\"pager-\" + index} onClick={this._pageChange.bind(null, index)}\n                    className=\"floatleft\">{index}</span>)\n            }\n        }\n        return (this.props.allPage <= 1 ? <div></div> : <div className=\"area-pager\">\n            <span onClick={this._pageChange.bind(null, 1)} className=\"floatleft\">首页</span>\n            <span onClick={this._pageChange.bind(null, this.props.nowPage - 1)} className=\"floatleft\">上一页</span>\n            {renderList}\n            <span onClick={this._pageChange.bind(null, this.props.nowPage + 1)} className=\"floatleft next\">下一页</span>\n        </div>);\n    }\n}","import $ from \"jquery\";\nimport React from \"react\";\nimport reqwest from \"reqwest\";\nimport * as Config from \"../config\";\nimport Pager from \"./Pager\";\nimport Loading from \"./Loading\";\n\nclass VideoItem extends React.Component {\n  render() {\n    var linkUrl = Config.ROUTES.VIDEO + \"/\" + this.props.data.param;\n    return (\n      <div className=\"video-item floatleft\">\n        <div className=\"video-block-small\">\n          <div className=\"left floatleft\">\n            <a href={linkUrl} target=\"_blank\">\n              <div className=\"thumb\">\n                <img className=\"lazy\" src={this.props.data.cover} />\n              </div>\n            </a>\n            <div className=\"info floatleft\">\n              <div className=\"info-text floatleft\">\n                播放: {this.props.data.play}\n              </div>\n              <div className=\"info-text floatright\">\n                弹幕: {this.props.data.danmaku}\n              </div>\n            </div>\n          </div>\n          <div className=\"right floatleft\">\n            <a href={linkUrl} target=\"_blank\" className=\"title floatleft\">\n              {this.props.data.title}\n            </a>\n\n            <a href={linkUrl} target=\"_blank\" className=\"up floatleft\">\n              up主: {this.props.data.name}\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nVideoItem.defaultProps = {\n  data: {\n    title: \"\",\n    cover: \"\",\n    param: \"\",\n    name: \"\",\n    play: \"\",\n    reply: \"\",\n    danmaku: \"\",\n    favourite: \"\",\n  },\n};\nclass VideoBlock extends React.Component {\n  render() {\n    var renderList = [];\n\n    for (var i in this.props.videoList) {\n      if (i != \"num\") {\n        renderList.push(\n          <VideoItem key={\"video-\" + i} data={this.props.videoList[i]} />\n        );\n      }\n    }\n\n    return (\n      <div className=\"list-sort-block floatleft\">\n        {renderList}\n        <div className=\"clear\"></div>\n      </div>\n    );\n  }\n}\n\nVideoBlock.defaultProps = {\n  videoList: [],\n};\n\nexport default class SortRank extends React.Component {\n  constructor(props) {\n    super(props);\n    this._page = 1;\n    this._order = \"view\";\n    this.state = {\n      videoList: [],\n      allPage: 0,\n      title: \"\",\n      loading: true,\n    };\n  }\n\n  //排序方式\n  _changeSort(sort) {\n    this._order = sort;\n    this._page = 1;\n    this._loadData(this.props.tid);\n  }\n  //分页\n  _changePage(page) {\n    //翻页后大传送术\n    $(\"body,html\").animate({ scrollTop: 0 }, 700);\n    this._page = page;\n    this._loadData(this.props.tid);\n  }\n  _loadData(tid) {\n    this.setState({\n      loading: true,\n    });\n    let _this = this;\n    let labelName = Config.sort_tags[tid];\n\n    reqwest({\n      url:\n        Config.API_BASE_URL +\n        Config.BACKEND_API.SORT_VIDEOS +\n        tid +\n        \"?page=\" +\n        _this._page +\n        \"&order=\" +\n        this._order,\n      type: \"json\",\n      method: \"get\",\n      crossOrigin: true,\n      error: function (err) {\n        console.log(\"error:\" + err);\n      },\n      success: function (data) {\n        _this.props.cb(labelName);\n        _this.setState({\n          videoList: data,\n          allPage: 999,\n          title: labelName,\n          loading: false,\n        });\n      },\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this._loadData(nextProps.tid);\n  }\n  componentDidMount() {\n    this._loadData(this.props.tid);\n  }\n  render() {\n    var _this = this;\n\n    return (\n      <div className=\"sort-left floatleft\">\n        <div className=\"banner\">\n          <p>{this.state.title}</p>\n        </div>\n\n        <div className=\"sort-tool-box floatleft\">\n          <a\n            onClick={_this._changeSort.bind(null, \"view\")}\n            className={\n              (this._order == \"hot\" ? \"active\" : \"\") + \" btn floatleft\"\n            }\n          >\n            点击数\n          </a>\n\n          <a\n            onClick={_this._changeSort.bind(null, \"senddate\")}\n            className={\n              (this._order == \"default\" ? \"active\" : \"\") + \" btn floatleft\"\n            }\n          >\n            发布时间\n          </a>\n\n          <a\n            onClick={_this._changeSort.bind(null, \"danmaku\")}\n            className={\n              (this._order == \"damku\" ? \"active\" : \"\") + \" btn floatleft\"\n            }\n          >\n            弹幕数\n          </a>\n        </div>\n\n        {this.state.loading ? (\n          <Loading />\n        ) : (\n          <div>\n            <VideoBlock videoList={this.state.videoList} />\n            <div className=\"clear\"></div>\n\n            <Pager\n              allPage={this.state.allPage}\n              nowPage={this._page}\n              pageCallBack={this._changePage}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nSortRank.defaultProps = {\n  tid: 0,\n  cb: function (content) {},\n};\n","import React from \"react\";\nimport * as Config from \"../config\";\nimport reqwest from \"reqwest\";\n\nclass VideoItem extends React.Component {\n  render() {\n    var linkUrl = Config.ROUTES.VIDEO + \"/\" + this.props.data.param;\n    return (\n      <div className=\"side-video-item\">\n        <div className=\"left floatleft\">\n          <img className=\"lazy\" src={this.props.data.cover} />\n        </div>\n        <div className=\"right floatleft\">\n          <a href={linkUrl} target=\"_blank\" className=\"title\">\n            {this.props.data.title}\n          </a>\n          <a href={linkUrl} target=\"_blank\" className=\"up\">\n            {this.props.data.name}\n          </a>\n          <div className=\"info\">\n            <div className=\"info-text floatleft\">\n              播放: {this.props.data.play}\n            </div>\n            <div className=\"info-text floatright\">\n              弹幕: {this.props.data.danmaku}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nVideoItem.defaultProps = {\n  title: \"\",\n  cover: \"\",\n  param: \"\",\n  name: \"\",\n  play: \"\",\n  reply: \"\",\n  danmaku: \"\",\n  favourite: \"\",\n};\n\nexport default class SortHot extends React.Component {\n  constructor(props) {\n    super(props);\n    this._order = \"hot\";\n    this.state = {\n      videoList: [],\n    };\n  }\n\n  _loadData() {\n    var _this = this;\n    reqwest({\n      url: Config.API_BASE_URL + Config.BACKEND_API.TOP_RANK,\n      type: \"json\",\n      method: \"get\",\n      crossOrigin: true,\n      error: function (err) {\n        console.log(\"error\");\n      },\n      success: function (data) {\n        _this.setState({\n          videoList: data,\n        });\n      },\n    });\n  }\n\n  componentDidMount() {\n    this._loadData();\n  }\n  render() {\n    var renderList = [];\n\n    for (var i in this.state.videoList) {\n      if (i != \"num\") {\n        renderList.push(\n          <VideoItem key={\"hot-\" + i} data={this.state.videoList[i]} />\n        );\n      }\n    }\n\n    return (\n      <div className=\"sort-right floatleft\">\n        <div className=\"banner\">\n          <p>热门排行</p>\n        </div>\n        <div className=\"side-video-list\">{renderList}</div>\n      </div>\n    );\n  }\n}\n\nSortHot.defaultProps = {\n  tid: 0,\n};\n","import React from \"react\";\nimport SortRank from \"../components/SortRank\";\nimport SortHot from \"../components/SortHot\";\n\nfunction titleCallback(content) {\n  document.title = \"BH5 | 分类:\" + content;\n}\n\nexport default function SortPage() {\n  return (\n    <div id=\"main-container\">\n      <div className=\"area\">\n        <div className=\"area-inner\">\n          <SortRank cb={titleCallback} tid={this.props.params.tid} />\n          <SortHot />\n          <div className=\"clear\"></div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport reqwest from \"reqwest\";\nimport Pager from \"./Pager\";\nimport Loading from \"./Loading\";\nimport { ROUTES, API_BASE_URL } from \"../config\";\n\nclass VideoItem extends React.Component {\n  static defaultProps = {\n    data: {\n      title: \"\",\n      cover: \"\",\n      param: \"\",\n      desc: \"\",\n      author: \"\",\n      duration: \"\",\n      play: 0,\n      danmaku: 0,\n    },\n  };\n\n  render() {\n    var date = new Date();\n    date.setTime(this.props.data.pubdate * 1000);\n\n    var linkUrl = ROUTES.VIDEO + \"/\" + this.props.data.param;\n    return (\n      <div className=\"search-video-block floatleft\">\n        <a href={linkUrl} target=\"_blank\">\n          <div className=\"img\">\n            <img src={this.props.data.cover} />\n            <span className=\"time\">{this.props.data.duration}</span>\n          </div>\n        </a>\n        <div className=\"other-info\">\n          <a href={linkUrl} target=\"_blank\" className=\"title\">\n            {this.props.data.title}\n          </a>\n          <div className=\"info floatleft\">\n            <div className=\"info-text floatleft\">\n              播放: {this.props.data.play}\n            </div>\n            <div className=\"info-text floatleft\">\n              {\" \"}\n              弹幕：{this.props.data.danmaku}\n            </div>\n            <div className=\"info-text floatleft\">\n              Up: {this.props.data.author}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass UserItem extends React.Component {\n  static defaultProps = {\n    data: {\n      title: \"\",\n      cover: \"\",\n      param: \"\",\n      fans: \"\",\n      sign: \"\",\n    },\n  };\n\n  render() {\n    var date = new Date();\n    date.setTime(this.props.data.pubdate * 1000);\n\n    var linkUrl = \"#\";\n    return (\n      <div className=\"search-video-block floatleft\">\n        <a href={linkUrl} target=\"_blank\">\n          <div className=\"img\">\n            <img src={this.props.data.cover} />\n          </div>\n        </a>\n        <div className=\"other-info\">\n          <a href={linkUrl} target=\"_blank\" className=\"title\">\n            {this.props.data.title}\n          </a>\n          <div className=\"info floatleft\">\n            <div className=\"info-text floatleft\">\n              粉丝: {this.props.data.fans}\n            </div>\n            <div className=\"info-text floatleft\">{this.props.data.sign}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass BangumiItem extends React.Component {\n  static defaultProps = {\n    data: {\n      title: \"\",\n      cover: \"\",\n      param: \"\",\n      cat_desc: \"\",\n      total_count: 0,\n    },\n  };\n  render() {\n    return (\n      <div className=\"special-li floatleft\">\n        <div className=\"img floatleft\">\n          <img src={this.props.data.cover} />\n        </div>\n        <div className=\"info floatleft\">\n          <a\n            href={ROUTES.BANGUMI + \"/\" + this.props.data.param}\n            target=\"_blank\"\n            className=\"title\"\n          >\n            {this.props.data.title}\n          </a>\n          <p className=\"desc\">{this.props.data.cat_desc}</p>\n          <div className=\"info\">\n            <div className=\"info-text floatleft\">\n              集数: {this.props.data.total_count}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Topic extends React.Component {\n  static defaultProps = {\n    data: {\n      arcurl: \"\",\n      author: \"\",\n      click: 0,\n      cover: \"\",\n      description: \"\",\n      favourite: 0,\n      keyword: \"\",\n      mid: 0,\n      pubdate: 0,\n      review: 0,\n      title: \"\",\n      tp_id: 0,\n      tp_type: 0,\n      update: 0,\n    },\n  };\n\n  render() {\n    return <div></div>;\n  }\n}\n\nclass SearchBlock extends React.Component {\n  _handleClick() {\n    var value = this.refs.search_content.value;\n    this.props.searchCallBack(value);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    //input value\n    this.refs.search_content.setAttribute(\"value\", this.props.keyword);\n  }\n  static defaultProps = {\n    keyword: \"\",\n    searchCallBack: function (keyword) {\n      console.log(keyword);\n    },\n  };\n  render() {\n    return (\n      <div className=\"search-block\">\n        <div className=\"input-wrap floatleft\">\n          <input\n            name=\"content\"\n            ref=\"search_content\"\n            className=\"search-content\"\n            placeholder=\"这里搜索\"\n          />\n        </div>\n        <div className=\"search-btn floatleft\" onClick={this._handleClick}>\n          <span>搜索</span>\n        </div>\n        <div className=\"clear\"></div>\n      </div>\n    );\n  }\n}\n\nexport default class SearchContent extends React.Component {\n  _searchType = \"video\";\n  _page = 1;\n  _order = \"totalrank\";\n  _keyword = \"\";\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n    };\n  }\n\n  _loadData() {\n    this.setState({\n      loading: true,\n    });\n    var _this = this;\n    reqwest({\n      url: API_BASE_URL,\n      type: \"json\",\n      method: \"get\",\n      data: {\n        keyword: _this._keyword,\n        page_size: 20,\n        page: _this._page,\n        order: _this._order,\n      },\n      crossOrigin: true,\n      error: function (err) {\n        console.log(\"error:\" + err);\n      },\n      success: function (data) {\n        _this.props.cb(_this._keyword);\n        _this.setState({\n          list: data,\n          all_page: 500,\n          loading: false,\n        });\n      },\n    });\n  }\n  _getSearch(content) {\n    this._keyword = content;\n    this._loadData();\n  }\n  _changeOrder(order) {\n    this._order = order;\n    this._loadData();\n  }\n  _changePage(page) {\n    this._page = page;\n    this._loadData();\n    $(\"body,html\").animate({ scrollTop: 0 }, 700);\n  }\n  _changeType(type) {\n    this._searchType = type;\n    this._page = 1;\n    this._loadData();\n  }\n  getInitialState() {\n    return {\n      list: [],\n      all_page: 0,\n      loading: true,\n    };\n  }\n  static defaultProps = {\n    keyword: \"\",\n    allPage: 20,\n    cb: function (content) {},\n  };\n  componentDidMount() {\n    this._keyword = this.props.keyword;\n    this._loadData();\n  }\n  componentWillReceiveProps(nextProps) {\n    this._keyword = nextProps.keyword;\n    this._loadData();\n    this.setState({\n      loading: true,\n    });\n  }\n  render() {\n    var renderArr = [];\n\n    for (var i = 0; i < this.state.list.length; i++) {\n      switch (this._searchType) {\n        case \"video\": {\n          renderArr.push(\n            <VideoItem key={\"video-\" + i} data={this.state.list[i]} />\n          );\n          break;\n        }\n        case \"bangumi\": {\n          renderArr.push(\n            <BangumiItem key={\"bangumi-\" + i} data={this.state.list[i]} />\n          );\n          break;\n        }\n        case \"user\": {\n          renderArr.push(\n            <UserItem key={\"user-\" + i} data={this.state.list[i]} />\n          );\n        }\n      }\n    }\n\n    return (\n      <div>\n        <div className=\"search-info\">\n          <div className=\"search-select-block\">\n            <ul className=\"wrap floatleft\">\n              <li\n                className={\n                  (this._searchType === \"video\" ? \"active\" : \"\") +\n                  \" sub floatleft\"\n                }\n                onClick={this._changeType.bind(null, \"video\")}\n              >\n                视频\n              </li>\n              <li\n                className={\n                  (this._searchType === \"bangumi\" ? \"active\" : \"\") +\n                  \" sub floatleft\"\n                }\n                onClick={this._changeType.bind(null, \"bangumi\")}\n              >\n                番剧\n              </li>\n              <li\n                className={\n                  (this._searchType === \"user\" ? \"active\" : \"\") +\n                  \" sub floatleft\"\n                }\n                onClick={this._changeType.bind(null, \"user\")}\n              >\n                UP主\n              </li>\n            </ul>\n            <div className=\"clear\"></div>\n          </div>\n\n          {this._searchType === \"video\" ? (\n            <div className=\"search-fliter-block\">\n              <ul className=\"wrap floatleft\">\n                <li\n                  onClick={this._changeOrder.bind(null, \"totalrank\")}\n                  className={\n                    (this._order === \"totalrank\" ? \"active\" : \"\") +\n                    \" sub floatleft\"\n                  }\n                >\n                  综合排序\n                </li>\n                <li\n                  onClick={this._changeOrder.bind(null, \"click\")}\n                  className={\n                    (this._order === \"click\" ? \"active\" : \"\") + \" sub floatleft\"\n                  }\n                >\n                  最多点击\n                </li>\n                <li\n                  onClick={this._changeOrder.bind(null, \"pubdate\")}\n                  className={\n                    (this._order === \"pubdate\" ? \"active\" : \"\") +\n                    \" sub floatleft\"\n                  }\n                >\n                  最新发布\n                </li>\n                <li\n                  onClick={this._changeOrder.bind(null, \"dm\")}\n                  className={\n                    (this._order === \"dm\" ? \"active\" : \"\") + \" sub floatleft\"\n                  }\n                >\n                  弹幕\n                </li>\n              </ul>\n              <div className=\"clear\"></div>\n            </div>\n          ) : (\n            <div></div>\n          )}\n        </div>\n\n        {this.state.loading ? (\n          <Loading />\n        ) : (\n          <div className=\"area\">\n            <div className=\"search-result-content\">\n              {renderArr}\n              <div className=\"clear\"></div>\n              <div className=\"search-pager\">\n                <Pager\n                  allPage={this.state.all_page}\n                  nowPage={this._page}\n                  pageCallBack={this._changePage}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport SearchContent from \"../components/SearchContent\";\n\nfunction titleCallback(content) {\n  document.title = \"BH5 | 搜索:\" + content;\n}\nexport default function SearchPage() {\n  return (\n    <SearchContent\n      cb={titleCallback}\n      keyword={this.props.match.params.keyword}\n    />\n  );\n}\n","import React from \"react\";\nimport * as Config from \"../config\";\nimport reqwest from \"reqwest\";\nimport Loading from \"./Loading\";\n\nclass BangumiItem extends React.Component {\n  render() {\n    return (\n      <div className=\"special-li\">\n        <div className=\"img floatleft\">\n          <img src={this.props.data.cover} />\n        </div>\n        <div className=\"info floatleft\">\n          <a\n            href={Config.ROUTES.BANGUMI + \"/\" + this.props.data.season_id}\n            className=\"title\"\n          >\n            {this.props.data.title}\n          </a>\n          <div className=\"info\">\n            <div className=\"info-text floatleft\">\n              状态: {this.props.data.is_finish == \"1\" ? \"已完结\" : \"连载中\"}\n            </div>\n            <div className=\"info-text floatleft\">\n              集数: {this.props.data.total_count}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nBangumiItem.defaultProps = {\n  data: {\n    title: \"\",\n    cover: \"\",\n    is_finish: \"\",\n    season_id: \"\",\n    total_count: \"\",\n  },\n};\n\nexport default class BangumiInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this._seasonId = \"\";\n    this.state = {\n      loading: true,\n      bagnumiInfo: null,\n    };\n  }\n  _loadData() {\n    var _this = this;\n    reqwest({\n      url:\n        Config.API_BASE_URL + Config.BACKEND_API.BANGUMI_INFO + _this._seasonId,\n      type: \"json\",\n      method: \"get\",\n      data: {},\n      crossOrigin: true,\n      error: function (err) {\n        console.log(\"error:\" + err);\n      },\n      success: function (data) {\n        _this.props.cb(data.title);\n        _this.setState({\n          bangumiInfo: data,\n          loading: false,\n        });\n      },\n    });\n  }\n\n  componentDidMount() {\n    this._seasonId = this.props.seasonId;\n    this._loadData();\n  }\n  componentWillReceiveProps(nextProps) {\n    this._seasonId = nextProps.seasonId;\n    this.setState({\n      loading: true,\n    });\n    this._loadData();\n  }\n  render() {\n    var seasons = [];\n    var actors = \"\";\n    var videos = [];\n\n    if (this.state.bangumiInfo != null) {\n      for (var i = 0; i < this.state.bangumiInfo.seasons.length; i++) {\n        seasons.push(\n          <BangumiItem\n            key={\"bangumi-\" + i}\n            data={this.state.bangumiInfo.seasons[i]}\n          />\n        );\n      }\n\n      for (i = 0; i < this.state.bangumiInfo.actor.length; i++) {\n        actors += this.state.bangumiInfo.actor[i].actor + \"、 \";\n      }\n\n      for (i = 0; i < this.state.bangumiInfo.episodes.length; i++) {\n        videos.push(\n          <li key={\"video-\" + i} className=\"floatleft\">\n            <a\n              href={\n                Config.ROUTES.VIDEO +\n                \"/\" +\n                this.state.bangumiInfo.episodes[i].av_id\n              }\n              target=\"_blank\"\n            >\n              <span className=\"bangumi-part-span\">\n                {this.state.bangumiInfo.episodes[i].index +\n                  \".\" +\n                  this.state.bangumiInfo.episodes[i].index_title}\n              </span>\n            </a>\n          </li>\n        );\n      }\n    }\n\n    return (\n      <div>\n        {this.state.loading ? (\n          <Loading />\n        ) : (\n          <div>\n            <div className=\"bangumi-header\">\n              <h2>{this.state.bangumiInfo.title}</h2>\n              <div className=\"bangumi-header-img\">\n                <img src={this.state.bangumiInfo.cover} />\n              </div>\n              <div className=\"bangumi-header-info\">\n                <p>\n                  声优：<span>{actors}</span>\n                </p>\n                <br />\n                <p>{this.state.bangumiInfo.evaluate}</p>\n                <br />\n                <p>\n                  播放数：<span>{this.state.bangumiInfo.play_count}</span> |\n                  弹幕数：<span>{this.state.bangumiInfo.danmaku_count}</span>\n                </p>\n              </div>\n            </div>\n            <div className=\"bangumi-season\">{seasons}</div>\n            <div className=\"clear\"></div>\n            <div className=\"bangumi-part\">\n              <p>剧集:</p>\n              <ul>{videos}</ul>\n              <div className=\"clear\"></div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBangumiInfo.defaultProps = {\n  seasonId: 0,\n  cb: function (content) {},\n};\n","import React from \"react\";\nimport BangumiInfo from \"../components/BangumiInfo\";\n\nfunction titleCallback(content) {\n  document.title = \"BH5 | 番剧:\" + content;\n}\n\nexport default function () {\n  return (\n    <div id=\"main-container\">\n      <BangumiInfo cb={titleCallback} seasonId={this.props.params.seasonId} />\n    </div>\n  );\n}\n","import $ from \"jquery\";\nimport React from \"react\";\nimport * as Config from \"../config\";\nimport reqwest from \"reqwest\";\nimport Loading from \"./Loading\";\n\nclass BangumiBanner extends React.Component {\n  _loadBanner() {\n    $(\".block-banner\").unslider({\n      animation: \"horizontal\",\n      autoplay: true,\n      arrows: false,\n      keys: false,\n    });\n  }\n  getDefaultProps() {\n    return {\n      list: [],\n    };\n  }\n  componentDidMount() {\n    this._loadBanner();\n  }\n  render() {\n    var banners = [];\n\n    for (var i = 0; i < this.props.list.length; i++) {\n      banners.push(\n        <li key={\"banner-li-\" + i}>\n          <a href={this.props.list[i].link} target=\"_blank\">\n            <img alt={this.props.list[i].title} src={this.props.list[i].img} />\n          </a>\n        </li>\n      );\n    }\n\n    return (\n      <div className=\"bangumi-banner-block\">\n        <div className=\"bangumi-banner block-banner\">\n          <ul>{banners}</ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass VideoItem extends React.Component {\n  render() {\n    var linkUrl = Config.ROUTES.VIDEO + \"/\" + this.props.data.aid;\n    return (\n      <div className=\"video-block floatleft\">\n        <a href={linkUrl} className=\"video-block-main\">\n          <img src={this.props.data.pic} />\n        </a>\n        <div className=\"video-block-time\">{this.props.data.duration}</div>\n        <a href=\"#\" className=\"video-block-info\">\n          标题: {this.props.data.title}\n          UP主: {this.props.data.author}\n        </a>\n        <div className=\"video-block-info-hidden\">\n          <div className=\"left floatleft\">播放: {this.props.data.play}</div>\n          <div className=\"right floatright\">\n            弹幕: {this.props.data.video_review}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nVideoItem.defaultProps = {\n  data: {\n    aid: \"\",\n    author: \"\",\n    coins: 0,\n    comment: 0,\n    create: \"\",\n    description: \"\",\n    duration: \"\",\n    favorites: 0,\n    mid: 0,\n    pic: \"\",\n    play: 0,\n    review: 0,\n    title: \"\",\n    typeid: 0,\n    typename: \"\",\n    video_review: 0,\n  },\n};\n\nexport default class BangumiIndex extends React.Component {\n  _loadData() {\n    var _this = this;\n    reqwest({\n      url: Config.API_BASE_URL + Config.BACKEND_API.BANGUMI_INDEX,\n      type: \"json\",\n      method: \"get\",\n      data: {},\n      crossOrigin: true,\n      error: function (err) {\n        console.log(\"error:\" + err);\n      },\n      success: function (data) {\n        _this.setState({\n          indexData: data,\n          loading: false,\n        });\n      },\n    });\n  }\n  getInitialState() {\n    return {\n      loading: true,\n      indexData: null,\n    };\n  }\n  componentDidMount() {\n    this._loadData();\n  }\n  render() {\n    var recommend_videos = [];\n\n    if (this.state.indexData != null) {\n      for (var i = 0; i < this.state.indexData.recommends.length; i++) {\n        recommend_videos.push(\n          <VideoItem\n            key={\"video-li-\" + i}\n            data={this.state.indexData.recommends[i]}\n          />\n        );\n      }\n    }\n\n    return (\n      <div>\n        <div className=\"area\">\n          {this.state.loading ? (\n            <Loading />\n          ) : (\n            <BangumiBanner list={this.state.indexData.banners} />\n          )}\n        </div>\n        <div className=\"area\">\n          <div className=\"area-inner\">\n            <div className=\"area-banner\">\n              <h2>视频推荐</h2>\n            </div>\n            {this.state.loading ? (\n              <Loading />\n            ) : (\n              <div className=\"list-video-block\">\n                {recommend_videos}\n                <div className=\"clear\"></div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import $ from \"jquery\";\nimport React from \"react\";\nimport * as Config from \"../config\";\nimport reqwest from \"reqwest\";\n\nimport Loading from \"./Loading\";\n\nclass BangumiItem extends React.Component {\n  getDefaultProps() {\n    return {\n      data: {\n        title: \"\",\n        cover: \"\",\n        is_finish: \"\",\n        season_id: \"\",\n        attention: \"\",\n      },\n    };\n  }\n  render() {\n    return (\n      <a\n        href={Config.ROUTES.BANGUMI + \"/\" + this.props.data.season_id}\n        target=\"_blank\"\n      >\n        <div className=\"bangumi_item floatleft\">\n          <div className=\"img-small floatleft\">\n            <img src={this.props.data.cover} />\n          </div>\n          <div className=\"info floatleft\">\n            <p className=\"title\">{this.props.data.title}</p>\n            <p className=\"other\">关注: {this.props.data.attention}</p>\n          </div>\n          <div className=\"clear\"></div>\n        </div>\n      </a>\n    );\n  }\n}\n\nexport default class BangumiList extends React.Component {\n  _showMore() {\n    $(\".list-bangumi-block\").animate({\n      maxHeight: \"2800px\",\n    });\n  }\n  _loadData() {\n    var _this = this;\n    reqwest({\n      url: Config.API_BASE_URL + Config.BACKEND_API.BANGUMI_LIST,\n      type: \"json\",\n      method: \"get\",\n      data: {},\n      crossOrigin: true,\n      error: function (err) {\n        console.log(\"error:\" + err);\n      },\n      success: function (data) {\n        _this.setState({\n          data: data,\n        });\n      },\n    });\n  }\n  getInitialState() {\n    return {\n      data: null,\n    };\n  }\n  componentDidMount() {\n    this._loadData();\n  }\n  render() {\n    var bangumiList = [];\n\n    if (this.state.data != null) {\n      for (var i = 0; i < this.state.data.list.length; i++) {\n        bangumiList.push(\n          <BangumiItem key={\"bangumi-\" + i} data={this.state.data.list[i]} />\n        );\n      }\n    }\n\n    return (\n      <div className=\"area\">\n        <div className=\"area-inner\">\n          <div className=\"area-banner\">\n            <h2>番剧列表</h2>\n          </div>\n          <div className=\"list-bangumi-block\">\n            {bangumiList}\n\n            <div className=\"clear\"></div>\n          </div>\n\n          <div className=\"toggle-btn\">\n            <a\n              className=\"active_toggle\"\n              href=\"javascript:void(0)\"\n              onClick={this._showMore}\n            >\n              显示/隐藏\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport BangumiIndex from \"../components/BangumiIndex\";\nimport BangumiList from \"../components/BangumiList\";\nexport default class BangumiIndexPage extends React.Component {\n  componentDidMount() {\n    document.title = \"BH5 | 番剧\";\n  }\n  render() {\n    return (\n      <div id=\"main-container\">\n        <BangumiIndex />\n        <BangumiList />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport * as Config from \"../config\";\nimport reqwest from \"reqwest\";\n\nclass VideoItem extends React.Component {\n  render() {\n    var linkUrl = Config.ROUTES.VIDEO + \"/\" + this.props.data.param;\n    return (\n      <div className=\"video-block floatleft\">\n        <a\n          href={linkUrl}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"video-block-main\"\n        >\n          <img src={this.props.data.cover} alt=\"cover\" />\n        </a>\n        <div className=\"video-block-time\">弹幕: {this.props.data.danmaku}</div>\n        <a\n          href={linkUrl}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"video-block-info\"\n        >\n          {this.props.data.title}\n        </a>\n        <div className=\"video-block-info-hidden\">\n          <div className=\"left floatleft\">播放: {this.props.data.play}</div>\n          <div className=\"right floatright\">回复: {this.props.data.reply}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nVideoItem.defaultProps = {\n  data: {\n    title: \"\",\n    cover: \"\",\n    param: \"\",\n    name: \"\",\n    play: \"\",\n    reply: \"\",\n    danmaku: \"\",\n    favourite: \"\",\n  },\n};\n\nclass VideoBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = this.getInitialState();\n  }\n\n  _loadData(tid) {\n    var _this = this;\n\n    var labelName = Config.sort_tags[tid];\n\n    reqwest({\n      url: Config.API_BASE_URL + Config.BACKEND_API.INDEX_RANK + tid,\n      type: \"json\",\n      method: \"get\",\n      crossOrigin: true,\n      error: function (err) {\n        console.log(\"error\");\n      },\n      success: function (resp) {\n        _this.setState({\n          videoList: resp.videos,\n          labelName: labelName,\n        });\n      },\n    });\n  }\n  getInitialState() {\n    return {\n      videoList: [],\n      labelName: \"\",\n    };\n  }\n  componentDidMount() {\n    this._loadData(this.props.tid);\n  }\n  render() {\n    var renderVideos = [];\n    for (var i in this.state.videoList) {\n      renderVideos.push(<VideoItem key={i} data={this.state.videoList[i]} />);\n      if (i === 9) {\n        break;\n      }\n    }\n    return (\n      <div className=\"area\">\n        <div className=\"area-inner\">\n          <div className=\"area-banner\">\n            <a className=\"area-banner-ch\">\n              <h3>{this.state.labelName}</h3>\n              <i className=\"area-banner-line-left\"></i>\n            </a>\n            <i className=\"area-banner-line-right\"></i>\n            <i className=\"area-banner-line-circle\"></i>\n          </div>\n          <div className=\"list-video-block floatleft\">{renderVideos}</div>\n          <div className=\"clear\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default class AllRank extends React.Component {\n  render() {\n    var renderList = [];\n    for (var i in Config.index_sorts) {\n      var id = Config.index_sorts[i];\n      renderList.push(<VideoBlock key={\"list-\" + id} tid={id} />);\n    }\n    return <div>{renderList}</div>;\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { VideoDetail } from \"../shapes\";\nimport { ROUTES } from \"../config\";\n\nexport class VideoListItem extends React.Component<VideoDetail> {\n  render() {\n    return (\n      <div className=\"video-block-mask floatleft\">\n        <Link to={ROUTES.VIDEO + \"/\" + this.props.videoId}>\n          <div className=\"video-block-mask-preview\">\n            <img alt={this.props.title} src={this.props.cover} />\n          </div>\n          <div className=\"video-block-mask-mask\"></div>\n\n          <div className=\"video-block-mask-info\">\n            <div className=\"title\">{this.props.title}</div>\n            <div className=\"up\">up主：{this.props.uploader}</div>\n            <div className=\"play\">播放：{this.props.playCount}</div>\n          </div>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default VideoListItem;\n","import React from \"react\";\nimport { VideoDetail } from \"../shapes\";\nimport VideoListIdem from \"./VideoListItem\";\n\ninterface Props {\n  videos: VideoDetail[];\n  loadVideosList: () => void;\n}\n\nexport default class VideoList extends React.Component<Props> {\n  componentDidMount() {\n    this.props.loadVideosList();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        {this.props.videos.slice(0, 6).map((video, index) => (\n          <VideoListIdem key={index} {...video} />\n        ))}\n      </React.Fragment>\n    );\n  }\n}\n","import React from \"react\";\nimport { Banner } from \"../shapes\";\n\nclass BannerBlock extends React.Component<{\n  bannerList: Banner[];\n}> {\n  componentDidMount() {\n    $(function () {\n      const dom: any = $(\".block-banner\");\n      dom.unslider({\n        animation: \"horizontal\",\n        autoplay: true,\n        arrows: false,\n        keys: false,\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"unslider-banner floatleft\">\n        <div className=\"block-banner index-banner\" ref=\"index_banner\">\n          <ul>\n            {this.props.bannerList.map((banner, index) => (\n              <li key={index}>\n                <a href={banner.url}>\n                  <img src={banner.img} alt=\"banner\" />\n                </a>\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div className=\"clear\"></div>\n      </div>\n    );\n  }\n}\n\ntype IndexBannerProps = {\n  banners: Banner[];\n  loadBanners: () => void;\n};\n\nexport default class IndexBanner extends React.Component<IndexBannerProps> {\n  componentDidMount() {\n    this.props.loadBanners();\n  }\n\n  render() {\n    return this.props.banners.length !== 0 ? (\n      <BannerBlock bannerList={this.props.banners} />\n    ) : (\n      <div></div>\n    );\n  }\n}\n","import React from \"react\";\nimport AllRank from \"../components/AllRank\";\nimport { connect } from \"react-redux\";\nimport { createSelector, PayloadAction, ThunkDispatch } from \"@reduxjs/toolkit\";\nimport { ReduxStoreTree, VideoDetail } from \"../shapes\";\nimport PureVideoList from \"../components/VideoList\";\nimport PureIndexBanner from \"../components/BannersSlider\";\nimport { fetchHotVideos, fetchBanners } from \"../actions\";\nimport { Banner } from \"../shapes\";\n\nconst IndexHot = (function () {\n  const mapStateToProps = (\n    state: ReduxStoreTree,\n    props: React.PropsWithoutRef<{}>\n  ) => ({\n    videos: createSelector(\n      (state: ReduxStoreTree) => state.videos,\n      (videos) =>\n        Object.values(videos).sort((a, b) => b.playCount - a.playCount)\n    )(state),\n  });\n  const mapDispatchToProps = (\n    dispatch: ThunkDispatch<ReduxStoreTree, void, PayloadAction<VideoDetail[]>>\n  ) => ({\n    loadVideosList: () => dispatch(fetchHotVideos()),\n  });\n  return connect(mapStateToProps, mapDispatchToProps)(PureVideoList);\n})();\n\nconst IndexBanner = (function () {\n  const mapStateToProps = (state: ReduxStoreTree) => ({\n    banners: createSelector(\n      (state: ReduxStoreTree) => state.banners,\n      (banners) => banners\n    )(state),\n  });\n  const mapDispatchToProps = (\n    dispatch: ThunkDispatch<ReduxStoreTree, void, PayloadAction<Banner[]>>\n  ) => ({\n    loadBanners: () => dispatch(fetchBanners()),\n  });\n  return connect(mapStateToProps, mapDispatchToProps)(PureIndexBanner);\n})();\n\nexport default class IndexPage extends React.Component {\n  componentDidMount() {\n    document.title = \"BH5 | 首页\";\n  }\n\n  render() {\n    return (\n      <div id=\"index-head-area\" className=\"area\">\n        <div className=\"area-inner\">\n          <div className=\"left-block floatleft\">\n            <IndexBanner />\n          </div>\n          <div className=\"right-block floatleft\">\n            <IndexHot />\n            <div className=\"clear\"></div>\n          </div>\n          <div className=\"clear\"></div>\n        </div>\n        <AllRank />\n      </div>\n    );\n  }\n}\n","import { Switch, Route } from \"react-router-dom\";\nimport { ROUTES } from \"./config\";\nimport ViewPage from \"./containers/ViewPage\";\nimport SortPage from \"./containers/SortPage\";\nimport SearchPage from \"./containers/SearchPage\";\nimport BangumiInfoPage from \"./containers/BangumiInfoPage\";\nimport BangumiIndexPage from \"./containers/BangumiIndexPage\";\nimport IndexPage from \"./containers/IndexPage\";\n\nexport default (\n  <Switch>\n    <Route path=\"/sort/:tid\" component={SortPage} />\n    <Route path={ROUTES.VIDEO + \"/:aid\"} component={ViewPage} />\n    <Route path={ROUTES.SEARCH + \"/:keyword\"} component={SearchPage} />\n    <Route path={ROUTES.BANGUMI + \"/:seasonId\"} component={BangumiInfoPage} />\n    <Route path=\"/bangumiindex\" component={BangumiIndexPage} />\n    <Route path=\"/\" component={IndexPage} />\n  </Switch>\n);\n","import $ from \"jquery\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { store } from \"./store\";\nimport { FRONTEND_BASE_PATH } from \"./config\";\nimport Layout from \"./components/layout/Layout\";\nimport Routes from \"./routes\";\nimport \"./index.css\";\n\ndeclare global {\n  interface Window {\n    $: any;\n    jQuery: any;\n  }\n}\nwindow[\"$\"] = window[\"jQuery\"] = $;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router basename={FRONTEND_BASE_PATH}>\n        <Layout>\n          <div id=\"main-container\" className=\"concat\">\n            {Routes}\n          </div>\n        </Layout>\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export default class CommentObject {\n  constructor(manager, init) {\n    this.align = 0;\n    this.index = 0;\n    this.mode = 1;\n    this.stime = 0;\n    this.text = \"\";\n    this._size = 20;\n    this._color = 0xffffff;\n    this.control = false;\n    this._border = false;\n\n    this.lifeTime = 4000 * manager.options.global.scale;\n    this.manager = manager;\n\n    if (init.hasOwnProperty(\"align\")) {\n      this.align = init[\"align\"];\n    }\n    if (init.hasOwnProperty(\"stime\")) {\n      this.stime = init[\"stime\"];\n    }\n    if (init.hasOwnProperty(\"text\")) {\n      this.text = init[\"text\"];\n    }\n    if (init.hasOwnProperty(\"mode\")) {\n      this.mode = init[\"mode\"];\n    }\n    if (init.hasOwnProperty(\"color\")) {\n      this._color = init[\"color\"];\n    }\n    if (init.hasOwnProperty(\"size\")) {\n      this._size = init[\"size\"];\n    }\n    if (init.hasOwnProperty(\"x\")) {\n      this._x = init[\"x\"];\n    }\n    if (init.hasOwnProperty(\"y\")) {\n      this._y = init[\"y\"];\n    }\n    if (init.hasOwnProperty(\"border\")) {\n      this._border = init[\"border\"];\n    }\n  }\n\n  offsetX(x) {\n    if (x === null || x === undefined) {\n      if (this._x === null || this._x === undefined) {\n        if (this.align % 2 === 0) {\n          this._x = this.dom.offsetLeft - this.manager.stage.offsetLeft;\n        } else {\n          this._x =\n            this.manager.stage.offsetWidth -\n            (this.dom.offsetLeft -\n              this.manager.stage.offsetLeft +\n              this.dom.offsetWidth);\n        }\n      }\n      return this._x;\n    } else {\n      this._x = x;\n      if (this.align % 2 === 0) {\n        this.dom.style.right = this._x + \"px\";\n      } else {\n        this.dom.style.left = this._x + \"px\";\n      }\n    }\n  }\n\n  offsetY(y) {\n    if (y === null || y === undefined) {\n      if (this._y === null || this._y === undefined) {\n        if (this.align < 2) {\n          this._y = this.dom.offsetTop;\n        } else {\n          this._y =\n            this.manager.stage.offsetHeight -\n            (this.dom.offsetTop + this.dom.offsetHeight);\n        }\n      }\n      return this._y;\n    } else {\n      this._y = y;\n      if (this.align < 2) {\n        this.dom.style.top = this._y + \"px\";\n      } else {\n        this.dom.style.top =\n          this.manager.stage.offsetHeight - y - this.dom.offsetHeight + \"px\";\n      }\n    }\n  }\n\n  Color(c) {\n    if (c === null || c === undefined) {\n      return this._color;\n    } else {\n      this._color = c;\n      var color = c.toString(16);\n      color =\n        color.length >= 6\n          ? color\n          : new Array(6 - color.length + 1).join(\"0\") + color;\n      if (color.indexOf(\"#\") !== 0) {\n        color = \"#\".concat(color);\n      }\n      this.dom.style.color = color;\n      if (this._color === 0) {\n        this.dom.className = this.manager.options.className + \" rshadow\";\n      }\n    }\n  }\n\n  Width(w) {\n    if (w === null || w === undefined) {\n      if (this._width === null || this._width === undefined) {\n        this._width = this.dom.offsetWidth;\n      }\n      return this._width;\n    } else {\n      this._width = w;\n      this.dom.style.width = this._width + \"px\";\n    }\n  }\n\n  Height(h) {\n    if (h === null || h === undefined) {\n      if (this._height === null || this._height === undefined) {\n        this._height = this.dom.offsetHeight;\n      }\n      return this._height;\n    } else {\n      this._height = h;\n      this.dom.style.height = this._height + \"px\";\n    }\n  }\n\n  Size(s) {\n    if (s === null || s === undefined) {\n      return this._size;\n    } else {\n      this._size = s;\n      this.dom.style.fontSize = this._size + \"px\";\n    }\n  }\n\n  Border(b) {\n    if (b === null || b === undefined) {\n      return this._border;\n    } else {\n      this._border = b;\n      this.dom.style.border = b;\n    }\n  }\n\n  init() {\n    var dom = document.createElement(\"div\");\n    dom.className = this.manager.options.className;\n\n    dom.appendChild(document.createTextNode(this.text));\n\n    dom.textContent = this.text;\n    dom.innerText = this.text;\n\n    this.dom = dom;\n\n    if (this._border) {\n      dom.style.border = \"2px solid red\";\n    }\n\n    this.Color(this._color);\n    this.Size(this._size);\n  }\n\n  checkTime(nowTime) {\n    return this.stime + this.lifeTime >= nowTime;\n  }\n\n  layout() {}\n\n  stop() {}\n\n  start() {}\n}\n","import CommentObject from \"./CommentObject\";\n\nexport default class StaticComment extends CommentObject {\n  constructor(manager, init) {\n    super(manager, init);\n    this.align = this.mode == 4 ? 3 : 0;\n  }\n\n  _findOffsetY(index, channel, offset) {\n    //取得起始位置(区别对齐方式)\n    var preY = offset;\n    for (var i in this.manager.nowLine) {\n      var cmObj = this.manager.nowLine[i];\n      //弹幕同类型同层\n      if (cmObj.mode === this.mode && cmObj.index === index) {\n        if (cmObj.offsetY() - preY >= channel) {\n          return preY;\n        } else {\n          preY = cmObj.offsetY() + cmObj.Height();\n        }\n      }\n    }\n    if (preY + channel <= this.manager.stage.offsetHeight) {\n      return preY;\n    }\n    return -1;\n  }\n\n  layout() {\n    var index = 0;\n    var channel = this.Height() + 2 * this.manager.options.margin;\n    var offset = 0;\n    var insertY = -1;\n\n    while (insertY < 0) {\n      insertY = this._findOffsetY(index, channel, offset);\n      index++;\n      offset += this.manager.options.indexOffset;\n    }\n\n    this.index = index - 1;\n    this.offsetX(\n      this.manager.stage.offsetLeft +\n        (this.manager.stage.offsetWidth - this.Width()) / 2\n    );\n    this.offsetY(insertY);\n  }\n}\n","import CommentObject from \"./CommentObject\";\n\nexport default class ScrollComment extends CommentObject {\n  constructor(manager, init) {\n    super(manager, init);\n    switch (this.mode) {\n      case 1:\n        this.align = 0;\n        break;\n      case 2:\n        this.align = 2;\n        break;\n      case 6:\n        this.align = 1;\n    }\n    this.follow = false;\n    this.control = true;\n    this.lifeTime *= manager.options.scroll.scale;\n    this.moving = false;\n\n    //容差\n    this.timeOffset = 700;\n  }\n\n  layout() {\n    var index = 0;\n    var channel = this.Size() + 2 * this.manager.options.margin;\n    var offset = 0;\n    var insertY = -1;\n    var width = this.Width();\n\n    while (insertY < 0) {\n      if (index > 1000) {\n        return;\n      }\n      insertY = this._findOffsetY(index, channel, offset);\n      index++;\n      offset += this.manager.options.indexOffset;\n    }\n    this.index = index - 1;\n    this.offsetY(insertY);\n    this.dom.style.right = \"-\" + width + \"px\";\n    this.dom.style.left = \"-\" + width + \"px\";\n\n    this.moveAnimation();\n  }\n\n  _findOffsetY(index, channel, offset) {\n    var cmObj;\n    var preY = offset;\n    for (var i = 0; i < this.manager.nowLine.length; i++) {\n      cmObj = this.manager.nowLine[i];\n      if (cmObj.mode === this.mode && cmObj.index === index) {\n        if (cmObj.offsetY() - preY >= channel) {\n          return preY;\n        }\n        if (!cmObj.follow && cmObj.timeLeft <= cmObj.lifeTime * 0.5) {\n          cmObj.follow = true;\n          return cmObj.offsetY();\n        }\n        preY = cmObj.offsetY() + cmObj.Height();\n      }\n    }\n    if (preY + channel <= this.manager.stage.offsetHeight) {\n      return preY;\n    }\n    return -1;\n  }\n\n  transform(trans) {\n    this.dom.style.transform = trans;\n    this.dom.style[\"webkitTransform\"] = trans;\n    this.dom.style[\"msTransform\"] = trans;\n    this.dom.style[\"oTransform\"] = trans;\n  }\n\n  moveTransform() {\n    if (!this.moving) {\n      var dx = -(this.manager.width + this.Width());\n      this.transform(\"translateX(\" + dx + \"px)\");\n      this.dom.style.transition = \"transform \" + this.lifeTime + \"ms linear\";\n      this.moving = true;\n    }\n  }\n\n  moveAnimation() {\n    var locate = this.align % 2 == 0 ? \"-left \" : \"-right \";\n    var animation = \"cmt-move\" + locate + this.lifeTime / 1000 + \"s linear\";\n    this.dom.style.animation = animation;\n    this.dom.style[\"-webkit-animation\"] = animation;\n    this.dom.style[\"-moz-animation\"] = animation;\n    this.dom.style[\"-o-animation\"] = animation;\n  }\n\n  start() {\n    this.dom.style[\"animation-play-state\"] = \"running\";\n  }\n\n  stop() {\n    this.dom.style[\"animation-play-state\"] = \"paused\";\n  }\n\n  checkTime(nowTime) {\n    return this.stime + this.lifeTime + this.timeOffset >= nowTime;\n  }\n}\n","import StaticComment from \"./StaticComment\";\nimport ScrollComment from \"./ScrollComment\";\n\nexport default class CommentManager {\n  constructor(stage) {\n    this.commentLine = [];\n    this.nowLine = [];\n    this.position = 0;\n    this.options = {\n      indexOffset: 0,\n      className: \"cmt\",\n      margin: 1,\n      global: {\n        opacity: 1,\n        scale: 1,\n      },\n      scroll: {\n        opacity: 1,\n        scale: 1,\n      },\n      limit: 0,\n    };\n    this.stage = stage;\n    this.width = stage.offsetWidth;\n    this.height = stage.offsetHeight;\n  }\n\n  startTimer() {\n    for (var i = 0; i < this.nowLine.length; i++) {\n      if (this.nowLine[i].control) {\n        this.nowLine[i].start();\n      }\n    }\n  }\n\n  stopTimer() {\n    for (var i = 0; i < this.nowLine.length; i++) {\n      if (this.nowLine[i].control) {\n        this.nowLine[i].stop();\n      }\n    }\n  }\n\n  nowLinePush(pushCmt) {\n    if (this.nowLine.length === 0) {\n      this.nowLine.push(pushCmt);\n      return;\n    }\n    if (this.nowLine[this.nowLine.length - 1].offsetY() <= pushCmt.offsetY()) {\n      this.nowLine.push(pushCmt);\n      return;\n    }\n    if (this.nowLine[0].offsetY() >= pushCmt.offsetY()) {\n      this.nowLine.unshift(pushCmt);\n      return;\n    }\n    var low = 0;\n    var high = this.nowLine.length - 1;\n\n    var i = 0;\n    var insertIndex = 0;\n    while (low < high) {\n      i = Math.floor((high + low + 1) / 2);\n      if (\n        this.nowLine[i - 1].offsetY() <= pushCmt.offsetY() &&\n        this.nowLine[i].offsetY() >= pushCmt.offsetY()\n      ) {\n        insertIndex = i;\n        break;\n      }\n      if (this.nowLine[i - 1].offsetY() > pushCmt.offsetY()) {\n        high = i - 1;\n      } else {\n        low = i;\n      }\n    }\n    this.nowLine.splice(insertIndex, 0, pushCmt);\n  }\n\n  nowLineRemove(removeCmt) {\n    var index = this.nowLine.indexOf(removeCmt);\n    if (index >= 0) {\n      this.nowLine.splice(index, 1);\n    }\n  }\n\n  setBounds() {\n    this.width = this.stage.offsetWidth;\n    this.height = this.stage.offsetHeight;\n  }\n\n  init() {\n    this.setBounds();\n    this.position = 0;\n  }\n\n  //插入弹幕\n  send(data) {\n    var cmt;\n    if (data.mode === 5 || data.mode === 4) {\n      cmt = new StaticComment(this, data);\n    } else if (data.mode === 1 || data.mode === 2 || data.mode == 6) {\n      cmt = new ScrollComment(this, data);\n    } else {\n      console.log(\"不支持的弹幕\");\n      return;\n    }\n    cmt.init();\n    this.stage.appendChild(cmt.dom);\n    cmt.layout();\n    this.nowLinePush(cmt);\n  }\n\n  seek(locateTime) {\n    this.position = 0;\n    this.position = this.locate(locateTime);\n  }\n\n  locate(time) {\n    for (var i = this.position; i < this.commentLine.length; i++) {\n      var cm = this.commentLine[i];\n      if (cm.stime >= time) {\n        return i;\n      }\n    }\n    return this.commentLine.length;\n  }\n\n  time(nowTime) {\n    if (\n      this.nowLine.length === 0 &&\n      this.position === this.commentLine.length\n    ) {\n      return;\n    }\n\n    nowTime -= 1;\n\n    if (this.position < this.commentLine.length) {\n      var end = this.locate(nowTime);\n\n      for (; this.position < end; this.position++) {\n        this.send(this.commentLine[this.position]);\n      }\n      this.position = end;\n    }\n\n    var length = this.nowLine.length;\n    for (var i = 0; i < length; i++) {\n      var cmt = this.nowLine[i];\n      if (!cmt.checkTime(nowTime)) {\n        this.remove(cmt);\n        length--;\n      }\n    }\n  }\n\n  load(timeLine) {\n    this.commentLine = timeLine;\n    this.position = 0;\n    this.commentLine.sort(function (a, b) {\n      if (a.stime >= b.stime) {\n        return 1;\n      } else {\n        return -1;\n      }\n    });\n  }\n\n  remove(rmObj) {\n    this.nowLineRemove(rmObj);\n    this.stage.removeChild(rmObj.dom);\n  }\n\n  clear() {\n    while (this.nowLine.length > 0) {\n      this.remove(this.nowLine[0]);\n    }\n  }\n}\n","import videojs from \"video.js\";\nimport reqwest from \"reqwest\";\nimport CommentManager from \"./CommentManager\";\nimport BilibiliParser from \"./BilibiliParser\";\n\nvideojs.plugin(\"initDanmaku\", function () {\n  function Danmu(ele) {\n    var _this = this;\n    this.danmuDiv = document.createElement(\"div\");\n    this.danmuDiv.className = \"vjs-danmu\";\n    ele\n      .el()\n      .insertBefore(\n        this.danmuDiv,\n        ele.el().getElementsByClassName(\"vjs-poster\")[0]\n      );\n\n    this.danmuShowControl = document.createElement(\"div\");\n    this.danmuShowControl.className =\n      \"vjs-danmu-control vjs-menu-button vjs-control\";\n    this.danmuShowControlContent = document.createElement(\"span\");\n    this.danmuShowControlContent.className = \"vjs-danmu-switch\";\n    this.danmuShowControlContent.innerHTML = \"弹幕\";\n    this.danmuShowControl.appendChild(this.danmuShowControlContent);\n    ele\n      .el()\n      .getElementsByClassName(\"vjs-control-bar\")[0]\n      .appendChild(this.danmuShowControl);\n\n    //CCL init\n    this.cmManager = new CommentManager(this.danmuDiv);\n    //弹幕播放时间\n    this.cmManager.options.scroll.scale = 3;\n    this.cmManager.init();\n    this.cmManager.clear();\n\n    this.cmManager.display = true;\n\n    //弹幕控制绑定\n    var video = ele.el().children[0];\n    var lastPosition = 0;\n    video.addEventListener(\"progress\", function () {\n      if (lastPosition == video.currentTime) {\n        video.hasStalled = true;\n        _this.cmManager.stopTimer();\n      } else lastPosition = video.currentTime;\n    });\n    //时间轴更新\n    video.addEventListener(\"timeupdate\", function () {\n      if (_this.cmManager.display === false) return;\n      if (video.hasStalled) {\n        _this.cmManager.startTimer();\n        video.hasStalled = false;\n      }\n      _this.cmManager.time(Math.floor(video.currentTime * 1000));\n    });\n\n    video.addEventListener(\"play\", function () {\n      _this.cmManager.startTimer();\n    });\n\n    video.addEventListener(\"pause\", function () {\n      _this.cmManager.stopTimer();\n    });\n\n    video.addEventListener(\"waiting\", function () {\n      _this.cmManager.stopTimer();\n    });\n\n    video.addEventListener(\"playing\", function () {\n      _this.cmManager.startTimer();\n    });\n\n    video.addEventListener(\"seeked\", function () {\n      _this.cmManager.seek(Math.floor(video.currentTime * 1000));\n      _this.cmManager.clear();\n    });\n\n    if (window) {\n      window.addEventListener(\"resize\", function () {\n        _this.cmManager.setBounds();\n      });\n    }\n    this.danmuShowControl.addEventListener(\"click\", function () {\n      if (_this.cmManager.display === true) {\n        _this.cmManager.clear();\n        _this.cmManager.display = false;\n        _this.danmuShowControlContent.innerHTML = \"无\";\n      } else {\n        _this.cmManager.display = true;\n        _this.danmuShowControlContent.innerHTML = \"弹幕\";\n      }\n    });\n\n    this.load = function (url) {\n      reqwest({\n        url: url,\n        type: \"xml\",\n        method: \"get\",\n        crossOrigin: true,\n        error: function (err) {\n          console.log(\"error:\", err);\n        },\n        success: function (data) {\n          if (data != null) {\n            _this.cmManager.load(BilibiliParser(data));\n          }\n        },\n      });\n    };\n\n    return this;\n  }\n\n  this.danmu = new Danmu(this);\n});\n","export default function BilibiliParser(xmlDoc) {\n  var elements = xmlDoc.getElementsByTagName(\"d\");\n\n  var danmakuList = [];\n  for (var i = 0; i < elements.length; i++) {\n    if (elements[i].getAttribute(\"p\") != null) {\n      var opt = elements[i].getAttribute(\"p\").split(\",\");\n      if (!elements[i].childNodes[0]) continue;\n      var text = elements[i].childNodes[0].nodeValue;\n      var obj = {};\n      obj.stime = Math.round(parseFloat(opt[0]) * 1000);\n      obj.mode = parseInt(opt[1]);\n      obj.size = parseInt(opt[2]);\n      obj.color = parseInt(opt[3]);\n      obj.date = parseInt(opt[4]);\n      obj.pool = parseInt(opt[5]);\n      obj.position = \"absolute\";\n      if (opt[7] != null) obj.dbid = parseInt(opt[7]);\n      obj.hash = opt[6];\n      obj.border = false;\n      if (obj.mode < 7) {\n        obj.text = text.replace(/(\\/n|\\\\n|\\n|\\r\\n)/g, \"\\n\");\n      }\n      if (obj.text != null) obj.text = obj.text.replace(/\\u25a0/g, \"\\u2588\");\n      danmakuList.push(obj);\n    }\n  }\n  return danmakuList;\n}\n","import React from \"react\";\nexport default function Loading() {\n  return (\n    <div className=\"loading-content\">\n      <div className=\"loading-pacman-block\">\n        <div className=\"loader-inner pacman\">\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"layout_layout__2VB0u\",\"header\":\"layout_header__2JG5n\",\"content\":\"layout_content__2DcUL\",\"footer\":\"layout_footer__2wSbM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bg\":\"Header_bg__3Euol\",\"sticky\":\"Header_sticky__3Vdf1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"aboutLinks\":\"Footer_aboutLinks__2eSPj\"};","import React from \"react\";\nimport videojs from \"video.js\";\nimport reqwest from \"reqwest\";\nimport * as Config from \"../config\";\nimport Loading from \"./Loading\";\n\nrequire(\"../danmaku/VideojsPlugin\");\nrequire(\"./VideojsHotKeys\");\n\nvar _oldPlayer = null; //Video.js的dispose()不能放在componentWillUnmount事件之前(和React.js自身清理相冲突)\n\nclass VideoBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this._player = null;\n  }\n\n  _loadVideoJs(commentUrl, videoUrl) {\n    if (_oldPlayer != null) {\n      _oldPlayer.dispose();\n      _oldPlayer = null;\n    }\n    if (this._player == null) {\n      this._player = videojs(\n        \"danmu_player\",\n        {\n          controls: true,\n        },\n        function () {\n          this.initDanmaku();\n          this.hotkeys({\n            volumeStep: 0.1,\n            seekStep: 5,\n            //音量键(M)\n            enableMute: true,\n            //滚轮调节音量\n            enableVolumeScroll: false,\n            //全屏(F)\n            enableFullscreen: true,\n            //数字选择分P\n            enableNumbers: false,\n            alwaysCaptureHotkeys: false,\n          });\n          this.danmu.load(commentUrl);\n          this.src(videoUrl);\n        }\n      );\n    } else {\n      this._player.src(videoUrl);\n      this._player.danmu.load(commentUrl);\n    }\n  }\n  componentDidMount() {\n    this._loadVideoJs(this.props.commentUrl, this.props.urlList.url);\n  }\n  componentWillReceiveProps(nextProps) {\n    if (this._player != null) {\n      //避免初次加载调用\n      this._loadVideoJs(nextProps.commentUrl, nextProps.urlList.url);\n    }\n  }\n  componentWillUnmount() {\n    _oldPlayer = this._player;\n    this.player = null;\n  }\n  render() {\n    return (\n      <video\n        id=\"danmu_player\"\n        className=\"video-js vjs-default-skin\"\n        controls=\"true\"\n        preload=\"auto\"\n        width=\"980\"\n        height=\"614\"\n        poster={this.props.pic}\n      >\n        <p className=\"vjs-no-js\">换换浏览器吧</p>\n      </video>\n    );\n  }\n}\n\nVideoBlock.defaultProps = {\n  url: \"\",\n  pic: \"\",\n  commentUrl: \"\",\n};\n\nexport default class Player extends React.Component {\n  constructor(props) {\n    super(props);\n    this._cid = null;\n    this._quality = 4;\n    this.state = {\n      loading: true,\n      data: null,\n      nowPlay: \"0\",\n    };\n  }\n\n  _selectParts(partStr) {\n    var cid = null;\n    if (this.props.parts.length !== 0) {\n      cid = this.props.parts[partStr].cid;\n    }\n    this._cid = cid;\n    this._loadVideoData();\n    this.setState({\n      nowPlay: partStr,\n    });\n  }\n  _loadVideoData() {\n    this.setState({\n      loading: true,\n    });\n    if (this._cid !== null) {\n      var _this = this;\n      reqwest({\n        url:\n          Config.API_BASE_URL +\n          Config.BACKEND_API.VIDEO_URL +\n          this._cid +\n          \"?quality=\" +\n          this._quality,\n        type: \"json\",\n        method: \"get\",\n        crossOrigin: true,\n        error: function (err) {\n          console.log(\"error\");\n        },\n        success: function (data) {\n          _this.setState({\n            loading: false,\n            data: data,\n          });\n        },\n      });\n    }\n  }\n\n  componentDidMount() {\n    //初始化cid\n    this._selectParts(\"0\");\n  }\n\n  render() {\n    var partList = [];\n    var display = \"none\";\n    if (this.props.parts.hasOwnProperty(\"1\")) {\n      for (var i in this.props.parts) {\n        if (this.props.parts.hasOwnProperty(i)) {\n          var active = \"\";\n          if (i === this.state.nowPlay) {\n            active = \"active\";\n          }\n          partList.push(\n            <span\n              key={\"parts-\" + i}\n              onClick={this._selectParts.bind(null, i)}\n              className={active + \" floatleft\"}\n            >\n              {this.props.parts[i].part}\n            </span>\n          );\n        }\n      }\n      display = \"block\";\n    }\n\n    var commentUrl = Config.BACKEND_API.GET_COMMENT + this._cid + \".xml\";\n\n    return (\n      <div className=\"area area-player\">\n        <div className=\"area-inner\">\n          <div\n            className=\"video-part-select floatleft\"\n            style={{ display: display }}\n          >\n            {partList}\n          </div>\n          <div className=\"clear\"></div>\n          {this.state.loading ? (\n            <Loading />\n          ) : (\n            <VideoBlock\n              urlList={this.state.data.durl[0]}\n              commentUrl={commentUrl}\n              pic={this.props.pic}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nPlayer.defaultProps = {\n  parts: [],\n  pic: \"\",\n};\n"],"sourceRoot":""}